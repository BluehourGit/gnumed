# GNUmed database system bootstrapping config file
#-------------------------------------------------
# license: GPL
# author: Karsten Hilbert@gmx.net

#----------------------------------
[revision control]
file = $Source: /home/ncq/Projekte/cvs2git/vcs-mirror/gnumed/gnumed/server/bootstrap/bootstrap-monolithic_core.conf,v $
version = $Revision: 1.66 $

#----------------------------------
[installation]
interactive = yes

keep temp files = no

description = $description$
This will set up a monolithic GNUmed backend with all bundles
in one database named [gnumed]. It will contain the core schema
without country or language-specific components. Those will
have to be added by using one of the bootstrap-XX.conf file
where XX represents the ISO country code.

Currently this file will also import the test accounts which
MUST be removed prior to real use.

$description$

bundles = $bundles$
config
reference
demographics
clinical
documents
office
$bundles$

#----------------------------------
[bundle config]
database alias = core
minimum postgresql version = 7.4
schema base directory = ../sql/
schema = $schema$
gmConfig-static.sql
gmConfigData.sql
gmConfigViews.sql
$schema$

[bundle demographics]
database alias = core
minimum postgresql version = 7.4
schema base directory = ../sql/
schema = $schema$
gmDemographics.sql
gmProviderInbox-static.sql
gmDemographics-Person-views.sql
gmDemographics-Person-data.sql
gmDemographics-GIS-views.sql
gmDemographics-GIS-data.sql
gmCountryZones.sql
gmDemographics-Org-views.sql
gmDemographics-Grants.sql
gmProviderInbox-data.sql
$schema$

[bundle clinical]
database alias = core
minimum postgresql version = 7.4
schema base directory = ../sql/
schema = $schema$
gmClin-EMR-Structure-static.sql
gmclinical.sql
gmClin-Vaccination-static.sql
gmWaitingList.sql
gmReviewedStatus-static.sql
gmReviewedStatus-dynamic.sql
gmMeasurements.sql
gmClin-EMR-Structure-dynamic.sql
gmClin-Vaccination-dynamic.sql
gmClinicalViews.sql
gmClin-EMR-Structure-data.sql
gmClinicalData.sql
gmClin-Vaccination-data.sql
gmUnmatchedData-static.sql
gmUnmatchedData-dynamic.sql
gmUnmatchableData-static.sql
gmUnmatchableData-dynamic.sql
$schema$

[bundle documents]
database alias = core
minimum postgresql version = 7.4
schema base directory = ../sql/
schema = $schema$
gmBlobs.sql
gmBlobsData.sql
gmBlobViews.sql
gmProviderInbox-dynamic.sql
$schema$

[bundle reference]
database alias = core
minimum postgresql version = 7.4
schema base directory = ../sql/
schema = $schema$
gmReference.sql
gmReference-dynamic.sql
gmReference-data.sql
$schema$

[bundle office]
database alias = core
minimum postgresql version = 7.4
schema base directory = ../sql/
schema = $schema$
gmoffice.sql
gmOfficeData.sql
$schema$

#----------------------------------
[database core]
name = gnumed
override name by = GM_CORE_DB
template database = template1
server alias = local host
audit disable = 0
audit trail parent table = audit.audit_trail
audit trail table prefix = log_
audit fields table = audit.audit_fields
schema base directory = ../sql/
schema = $schema$
gmSchemaRevision.sql
gmSchemaRevisionViews.sql
gmServices.sql
gmI18N.sql
gmI18N-dynamic.sql
gmAudit.sql
gmAudit-dynamic.sql
gmNotifications-static.sql
gmNotifications-dynamic.sql
gmHousekeeping.sql
$schema$

superuser schema = $superuser schema$
gmCreateProceduralLanguages.sql
gmCreateUserFunction.sql
gmPublicAccounts.sql
gmTestAccounts.sql
$superuser schema$

#----------------------------------
[server local host]
name = 
port = 5432
template database = template1
super user alias = postgres
schema base directory = ../sql/
schema = $schema$
$schema$

#----------------------------------
[user GNUmed owner]
name = gm-dbo
password =

[user postgres]
name = postgres

#----------------------------------
# these really shouldn't be changed
#----------------------------------
[GnuMed defaults]

database owner alias = GNUmed owner

groups = $groups$
gm-logins
gm-doctors
gm-staff_medical
gm-staff_office
gm-trainees_medical
gm-trainees_office
gm-public
$groups$

#----------------------------------
# $Log: bootstrap-monolithic_core.conf,v $
# Revision 1.66  2007-04-20 08:23:54  ncq
# - delete temp files
#
# Revision 1.65  2006/12/29 16:28:25  ncq
# - "service" -> "bundle", no more services
# - remove "name" and "version" on previous "service" groups
#
# Revision 1.64  2006/12/29 13:56:50  ncq
# - bump required PG version to 7.4
# - remove procedural languages options
# - include gmCreateProceduralLanguages.sql in database level superuser schema import
#
# Revision 1.63  2006/09/17 07:02:00  ncq
# - we don't register services anymore
#
# Revision 1.62  2006/06/14 14:34:24  ncq
# - cleanup
#
# Revision 1.61  2006/06/13 21:12:04  ncq
# - name option to language section
# - add 8.1 library pathes for UNIX and Windows
#
# Revision 1.60  2006/05/24 12:51:13  ncq
# - standarize on only '' being local domain sockets connections
#
# Revision 1.59  2006/05/16 16:05:30  ncq
# - move provider inbox views later in sequence
#
# Revision 1.58  2006/05/08 12:38:47  ncq
# - make password parameter sane:
#   - missing or commented out means: not needed, eg IDENT or TRUST
#   - empty means: ask user if interactive or leave empty (but log warning) if not interactive
#
# Revision 1.57  2006/05/08 12:03:07  ncq
# - gm-dbo is assumed to have a password (it's not required to exist as a system user)
# - postgres is not expected to have one (it's a system user usually only allowed via IDENT)
#
# Revision 1.56  2006/05/07 16:23:33  shilbert
# - settle for #password = as default
#
# Revision 1.55  2006/05/07 16:13:58  shilbert
# - cleanup
#
# Revision 1.54  2006/05/06 18:49:44  ncq
# - GnuMed -> GNUmed
#
# Revision 1.53  2006/02/19 13:45:37  ncq
# - move gmClinicalViews.sql further down behind vaccination views
#
# Revision 1.52  2006/02/10 14:09:23  ncq
# - EMR structure schema now has its own files
#
# Revision 1.51  2006/02/08 15:16:08  ncq
# - use factored out vacc files
#
# Revision 1.50  2006/02/02 16:19:09  ncq
# - improve checking for existing/non-existing gm-dbo
# - enable infrastructure for database-only GNUmed user adding
#
# Revision 1.49  2006/01/27 22:28:42  ncq
# - properly rearrange reviewed_status and users thereof, it now makes sense
#
# Revision 1.48  2006/01/22 18:15:00  ncq
# - include provider inbox base data
#
# Revision 1.47  2006/01/10 12:58:17  sjtan
#
# path for plpgsql on a debian system added; remove need to know base sql dir for gmCountryCodes.sql
#
# Revision 1.46  2006/01/09 13:46:31  ncq
# - include dynamic i18n stuff in core
#
# Revision 1.45  2006/01/08 17:00:50  ncq
# - added provider inbox tables
#
# Revision 1.44  2006/01/05 16:07:11  ncq
# - generate audit trail tables and functions in schema "audit"
# - adjust configuration
# - audit trigger functions now "security definer" (== gm-dbo)
# - grant SELECT only to non-gm-dbo users
# - return language_handler not opaque from language call handler functions
#
# Revision 1.43  2005/12/24 09:17:07  sjtan
#
# lib path for postgresql  8.0
#
# Revision 1.42  2005/12/05 21:44:09  ncq
# - comment out cross db fk sql for now
#
# Revision 1.41  2005/12/04 09:31:11  ncq
# - remove scoring
# - add split notification ddl
#
# Revision 1.40  2005/11/25 14:57:24  ncq
# - explicitely include waiting list schema
#
# Revision 1.39  2005/11/18 15:56:55  ncq
# - gmconfiguration.sql -> gmConfig-static.sql
#
# Revision 1.38  2005/11/18 15:28:34  ncq
# - required PostgreSQL version now raised from 7.1 to 7.3
# - Debian stable has 7.4.x so we are good to go for 7.3 *at least*
#
# Revision 1.37  2005/11/09 14:17:19  ncq
# - add library path for Debian Sarge PostgreSQL 7.4 cluster
#
# Revision 1.36  2005/10/30 22:08:07  ncq
# - add unmatched/unmatchable data schema
#
# Revision 1.35  2005/10/26 21:32:05  ncq
# - reviewed status tracking
#
# Revision 1.34  2005/10/24 19:31:34  ncq
# - need to include dynamic audit sql
#
# Revision 1.33  2005/09/19 16:29:33  ncq
# - set template database per database
# - remove scoring support
#
# Revision 1.32  2005/06/01 23:17:43  ncq
# - support overriding target database name via environment variable
#
# Revision 1.31  2005/03/01 20:34:22  ncq
# - add $libdir to library search path ...
#
# Revision 1.30  2005/01/12 14:47:48  ncq
# - in DB speak the database owner is customarily called dbo, hence use that
#
# Revision 1.29  2004/11/24 15:36:31  ncq
# - add option "keep temp files"
#
# Revision 1.28  2004/09/02 00:41:04  ncq
# - bootstrap v_cfg_options, too
#
# Revision 1.27  2004/07/19 14:41:55  ncq
# - added some example workplaces
#
# Revision 1.26  2004/07/17 20:57:53  ncq
# - don't use user/_user workaround anymore as we dropped supporting
#   it (but we did NOT drop supporting readonly connections on > 7.3)
#
# Revision 1.25  2004/04/15 09:38:17  ncq
# - added blob views
#
# Revision 1.24  2004/04/07 18:16:06  ncq
# - move grants into re-runnable scripts
# - update *.conf accordingly
#
# Revision 1.23  2004/03/16 15:59:32  ncq
# - import housekeeping tables at database level
#
# Revision 1.22  2004/03/14 22:32:04  ncq
# - postgres version -> minimum postgresql version
#
# Revision 1.21  2004/03/10 14:25:08  ncq
# - added service office (administrivia)
#
# Revision 1.20  2004/03/09 10:45:03  ncq
# - typo fix
# - gmFormDefs now merged with gmReference.sql
#
# Revision 1.19  2004/03/08 17:05:23  ncq
# - import gmFormDefs.sql into clinical service
#
# Revision 1.18  2004/02/24 11:02:29  ihaywood
# Nice mode added
# If script started with no parameters, scans directory and presents menu of configs
# Tries hard to connect to local database.
#
# Revision 1.17  2004/01/06 10:20:00  ncq
# - do ask for passwords as we don't know the setup on other machines
#
# Revision 1.16  2004/01/05 01:02:48  ncq
# - local connections need empty host name
#
# Revision 1.15  2004/01/04 17:31:07  ncq
# - no, it does not, PublicAccounts contains any-doc while TestAccounts
#   provides test-doc and friends, if so then remove TestAccounts as those
#   aren't mapped to staff entries yet as opposed to any-doc ...
#
# Revision 1.14  2004/01/04 06:35:39  ihaywood
# More sane loggin on Psql.py
# in monolithic-core, gmPublicAccounts.sql droppped as it repeats gmTestAccounts.sql
#
# Revision 1.13  2003/12/29 19:11:13  uid66147
# - reworked public DB generation
#
# Revision 1.12  2003/11/28 08:49:40  ncq
# - add gmNotifications.sql
#
# Revision 1.11  2003/11/11 19:22:57  ncq
# - fix amis bootstrap file
# - leave name empty for local host
#
# Revision 1.10  2003/11/02 12:48:55  ncq
# - add schema base directory option to config files
# - hence we don't need the sql link anymore
#
# Revision 1.9  2003/10/31 23:25:10  ncq
# - actually, no test data whatsoever
#
# Revision 1.8  2003/10/31 23:24:31  ncq
# - include more test data
#
# Revision 1.7  2003/10/19 12:57:19  ncq
# - add scoring schema generator and use it
#
# Revision 1.6  2003/10/01 15:59:20  ncq
# - remove now-obsolete audit_mark defines
#
# Revision 1.5  2003/08/26 14:11:13  ncq
# - add option to disable checking for proc lang library files on remote machines
#
# Revision 1.4  2003/08/26 13:05:04  ncq
# - add "audit disable" flag
#
# Revision 1.3  2003/08/17 18:06:36  ncq
# - add x_db_fk views
#
# Revision 1.2  2003/08/17 00:06:37  ncq
# - add def for audit fields table
#
# Revision 1.1  2003/08/13 21:15:32  ncq
# - separate files for core functionality database and
#   "language pack"
#
# Revision 1.12  2003/08/03 14:04:10  ncq
# - import measurements before views now
#
# Revision 1.11  2003/08/02 13:14:03  ncq
# - adapt to gmDemographics*.sql
#
# Revision 1.10  2003/07/27 21:40:04  ncq
# - add gmMeasurements to clinical service
# - add gmCrossDB_FKs to database schema
#
# Revision 1.9  2003/06/10 09:57:24  ncq
# - remove misleading comment
#
# Revision 1.8  2003/05/22 12:53:41  ncq
# - add automatic audit trail generation
# - add options for that
#
# Revision 1.7  2003/05/13 14:38:19  ncq
# - add gmAudit to database level schema
#
# Revision 1.6  2003/05/12 12:47:25  ncq
# - import some schema files at the database level, too
# - add corresponding schema list in the config files
#
# Revision 1.5  2003/04/28 20:47:15  ncq
# - factored out gmClinicalViews.sql
#
# Revision 1.4  2003/04/18 13:21:16  ncq
# - include new script gmIdentityViews.sql
#
# Revision 1.3  2003/04/09 13:55:51  ncq
# - some whitespace fixup
#
# Revision 1.2  2003/04/07 11:15:02  ncq
# - added factored out gmBlobsData.sql
#
# Revision 1.1  2003/04/01 13:03:55  ncq
# - for public databases
#
# Revision 1.1  2003/03/30 22:18:53  ncq
# - renamed after discussion with native speaker :-)
#
# Revision 1.3  2003/03/30 20:57:37  ncq
# - make localhost be 127.0.0.1 as Mandrake happens to want to rename that to the local hostname :-)
#
# Revision 1.2  2003/03/26 15:47:54  ncq
# - alas, some distros store procedural language libraries in /usr/lib/postgresql/
#
# Revision 1.1  2003/02/25 08:26:49  ncq
# - moved here from server/utils/
#
# Revision 1.5  2003/02/23 19:13:08  ncq
# - move language library dirs to [GnuMed defaults] and that to
#   the bottom of the file as per suggestion by Andreas
#
# Revision 1.4  2003/02/09 11:46:11  ncq
# - added core database option for registering services
# - convenience function _run_query()
#
# Revision 1.3  2003/01/28 13:39:14  ncq
# - implemented schema import at the server level (= template database)
# - this is mainly useful for importing users
#
# Revision 1.2  2003/01/26 13:30:25  ncq
# - document all options
#
# Revision 1.1  2003/01/26 12:47:17  ncq
# - next generation from test-area/
#
# Revision 1.4  2003/01/22 23:21:45  ncq
# - this sort of documents the whole affair
#
