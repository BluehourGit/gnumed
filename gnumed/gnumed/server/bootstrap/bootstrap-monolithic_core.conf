# GnuMed database system bootstrapping config file
#-------------------------------------------------
# license: GPL
# author: Karsten Hilbert@gmx.net

#----------------------------------
[revision control]
file = $Source: /home/ncq/Projekte/cvs2git/vcs-mirror/gnumed/gnumed/server/bootstrap/bootstrap-monolithic_core.conf,v $
version = $Revision: 1.9 $

#----------------------------------
[installation]
interactive = yes

description = $description$
This will set up a monolithic GnuMed backend with all services
in one database named [gnumed]. It will contain the core schema
without country or language-specific components. Those will
have to be added by using one of the bootstrap-XX.conf file
where XX represents the ISO country code.

Currently this file will also import the test accounts which
MUST be removed prior to real use.

$description$

services = $services$
config
demographics
clinical
documents
reference
$services$

#----------------------------------
[service config]
name = default
version = 0.1
database alias = core
postgres version = 7.1
registration database = core

schema = $schema$
sql/gmconfiguration.sql
$schema$


[service demographics]
name = personalia
version = 0.1
database alias = core
postgres version = 7.1
registration database = core

schema = $schema$
sql/gmDemographics.sql
sql/gmDemographics-Person-views.sql
sql/gmDemographics-Person-data.sql
sql/gmDemographics-GIS-views.sql
sql/gmDemographics-GIS-data.sql
sql/gmDemographics-Org-views.sql
$schema$

[service clinical]
name = historica
version = 0.1
database alias = core
postgres version = 7.1
registration database = core

schema = $schema$
sql/gmclinical.sql
sql/gmMeasurements.sql
sql/gmClinicalViews.sql
sql/gmClinicalData.sql
$schema$

[service documents]
name = blobs
version = 0.1
database alias = core
postgres version = 7.1
registration database = core
schema = $schema$
sql/gmBlobs.sql
sql/gmBlobsData.sql
$schema$

[service reference]
name = reference
version = 0.1
database alias = core
postgres version = 7.1
registration database = core
schema = $schema$
sql/gmReference.sql
$schema$

#----------------------------------
[database core]
name = gnumed
server alias = local host
audit disable = 0
audit trail parent table = audit_trail
audit trail table prefix = log_
audit fields table = audit_fields
scoring disable = 0
scoring table prefix = score_
scoring fields table = scoring_fields
schema = $schema$
sql/gmSchemaRevision.sql
sql/gmServices.sql
sql/gmI18N.sql
sql/gmAudit.sql
sql/gmCrossDB_FKs.sql
sql/gmCrossDB_FK-views.sql
sql/gmScoring.sql
$schema$

#----------------------------------
[server local host]
name = 127.0.0.1
port = 5432
template database = template1
super user alias = postgres
procedural language library check = yes
schema = $schema$
sql/gmTestAccounts.sql
$schema$

#----------------------------------
[user GnuMed owner]
name = gm-dbowner
#password = 

[user postgres]
name = postgres
#password =

#----------------------------------
# these really shouldn't be changed
#----------------------------------
[GnuMed defaults]

database owner alias = GnuMed owner

groups = $groups$
gm-doctors
_gm-doctors
gm-staff_medical
_gm-staff_medical
gm-staff_office
_gm-staff_office
gm-trainees_medical
gm-trainees_office
gm-public
$groups$

procedural languages = $procedural languages$
pg/SQL
$procedural languages$

language library dirs = $language library dirs$
/usr/lib/postgresql/
/usr/lib/postgresql/lib/
/usr/lib/pgsql/
/usr/local/pgsql/lib
$language library dirs$

#----------------------------------
# don't ask, this is deep magic ;-)
# meditate over it and enlightenment will be thyne
[pg/SQL]
library name = plpgsql.so
library dir = 

call handler = $call handler$
CREATE FUNCTION plpgsql_call_handler () RETURNS OPAQUE AS '%s' LANGUAGE 'C';
$call handler$

language activation = $language activation$
CREATE TRUSTED PROCEDURAL LANGUAGE 'plpgsql' HANDLER plpgsql_call_handler LANCOMPILER 'PL/pgSQL';
$language activation$

#----------------------------------
# $Log: bootstrap-monolithic_core.conf,v $
# Revision 1.9  2003-10-31 23:25:10  ncq
# - actually, no test data whatsoever
#
# Revision 1.8  2003/10/31 23:24:31  ncq
# - include more test data
#
# Revision 1.7  2003/10/19 12:57:19  ncq
# - add scoring schema generator and use it
#
# Revision 1.6  2003/10/01 15:59:20  ncq
# - remove now-obsolete audit_mark defines
#
# Revision 1.5  2003/08/26 14:11:13  ncq
# - add option to disable checking for proc lang library files on remote machines
#
# Revision 1.4  2003/08/26 13:05:04  ncq
# - add "audit disable" flag
#
# Revision 1.3  2003/08/17 18:06:36  ncq
# - add x_db_fk views
#
# Revision 1.2  2003/08/17 00:06:37  ncq
# - add def for audit fields table
#
# Revision 1.1  2003/08/13 21:15:32  ncq
# - separate files for core functionality database and
#   "language pack"
#
# Revision 1.12  2003/08/03 14:04:10  ncq
# - import measurements before views now
#
# Revision 1.11  2003/08/02 13:14:03  ncq
# - adapt to gmDemographics*.sql
#
# Revision 1.10  2003/07/27 21:40:04  ncq
# - add gmMeasurements to clinical service
# - add gmCrossDB_FKs to database schema
#
# Revision 1.9  2003/06/10 09:57:24  ncq
# - remove misleading comment
#
# Revision 1.8  2003/05/22 12:53:41  ncq
# - add automatic audit trail generation
# - add options for that
#
# Revision 1.7  2003/05/13 14:38:19  ncq
# - add gmAudit to database level schema
#
# Revision 1.6  2003/05/12 12:47:25  ncq
# - import some schema files at the database level, too
# - add corresponding schema list in the config files
#
# Revision 1.5  2003/04/28 20:47:15  ncq
# - factored out gmClinicalViews.sql
#
# Revision 1.4  2003/04/18 13:21:16  ncq
# - include new script gmIdentityViews.sql
#
# Revision 1.3  2003/04/09 13:55:51  ncq
# - some whitespace fixup
#
# Revision 1.2  2003/04/07 11:15:02  ncq
# - added factored out gmBlobsData.sql
#
# Revision 1.1  2003/04/01 13:03:55  ncq
# - for public databases
#
# Revision 1.1  2003/03/30 22:18:53  ncq
# - renamed after discussion with native speaker :-)
#
# Revision 1.3  2003/03/30 20:57:37  ncq
# - make localhost be 127.0.0.1 as Mandrake happens to want to rename that to the local hostname :-)
#
# Revision 1.2  2003/03/26 15:47:54  ncq
# - alas, some distros store procedural language libraries in /usr/lib/postgresql/
#
# Revision 1.1  2003/02/25 08:26:49  ncq
# - moved here from server/utils/
#
# Revision 1.5  2003/02/23 19:13:08  ncq
# - move language library dirs to [GnuMed defaults] and that to
#   the bottom of the file as per suggestion by Andreas
#
# Revision 1.4  2003/02/09 11:46:11  ncq
# - added core database option for registering services
# - convenience function _run_query()
#
# Revision 1.3  2003/01/28 13:39:14  ncq
# - implemented schema import at the server level (= template database)
# - this is mainly useful for importing users
#
# Revision 1.2  2003/01/26 13:30:25  ncq
# - document all options
#
# Revision 1.1  2003/01/26 12:47:17  ncq
# - next generation from test-area/
#
# Revision 1.4  2003/01/22 23:21:45  ncq
# - this sort of documents the whole affair
#
