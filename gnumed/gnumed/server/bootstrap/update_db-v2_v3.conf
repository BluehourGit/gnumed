# GNUmed database system bootstrapping config file
#-------------------------------------------------
# license: GPL
# author: Karsten Hilbert@gmx.net

#----------------------------------
[revision control]
file = $Source: /home/ncq/Projekte/cvs2git/vcs-mirror/gnumed/gnumed/server/bootstrap/update_db-v2_v3.conf,v $
version = $Revision: 1.20 $

#----------------------------------
[installation]
interactive = yes

keep temp files = yes

description = $description$
This will update an existing GNUmed version 2
database to the version 3 schema. It does not do
any harm to the data contained within.

The existing database is cloned first. The copy is
then modified. The original database remains unchanged.
$description$

bundles = $bundles$
v2-v3-static
v2-v3-dynamic
$bundles$

#----------------------------------
[bundle v2-v3-static]
database alias = gnumed_v3
minimum postgresql version = 7.4
schema base directory = ../sql/v2-v3/static/
schema = $schema$
cfg-cfg_item.sql
cfg-cfg_str_array.sql
ref-schema.sql
ref-document_type.sql
blobs-doc_type.sql
blobs-doc_med.sql
blobs-doc_obj.sql
blobs-doc_desc.sql
blobs-xlnk_identity.sql
dem-lnk_job2person.sql
clin-test_org.sql
clin-test_result.sql
clin-lab_request.sql
clin-waiting_list.sql
clin-hx_family_item.sql
clin-allergy_state.sql
clin-lnk_pat2vaccination_course.sql
clin-vaccination.sql
clin-health_issue.sql
audit-log_health_issue.sql
clin-episode.sql
clin-encounter.sql
au-referral.sql
clin-xlnk_identity.sql
$schema$

#----------------------------------
[bundle v2-v3-dynamic]
database alias = gnumed_v3
minimum postgresql version = 7.4
schema base directory = ../sql/v2-v3/dynamic/
schema = $schema$
cfg-set_option.sql
ref-document_type-dynamic.sql
blobs-v_doc_type.sql
blobs-v_doc_med.sql
blobs-v_doc_desc.sql
blobs-v_obj4doc_no_data.sql
blobs-v_reviewed_doc_objects.sql
dem-create_urb.sql
dem-create_street.sql
dem-create_address.sql
dem-v_uniq_zipped_urbs.sql
dem-v_state.sql
dem-v_urb.sql
dem-v_street.sql
dem-v_address.sql
dem-v_pat_addresses.sql
dem-v_provider_inbox.sql
dem-v_person_jobs.sql
dem-v_person_comms.sql
clin-encounter.sql
clin-health_issue.sql
clin-episode.sql
clin-clin_narrative.sql
clin-v_pat_narrative.sql
clin-v_pat_narrative_soap.sql
clin-v_hx_family.sql
clin-v_narrative4search.sql
clin-v_emr_journal.sql
clin-health_issue.sql
clin-operation.sql
$schema$

#----------------------------------
[database gnumed_v3]
name = gnumed_v3
override name by = GM_CORE_DB
template database = gnumed_v2
template version = v2
server alias = local host
audit disable = 0
audit trail parent table = audit.audit_trail
audit trail table prefix = log_
audit fields table = audit.audit_fields
schema base directory = ../sql/v2-v3/
schema = $schema$
$schema$

superuser schema = $superuser schema$
superuser/public-gm_transfer_users.sql
superuser/transfer_users.sql
$superuser schema$

#----------------------------------
[server local host]
name = 
port = 5432
template database = template1
super user alias = postgres
schema base directory = ../sql/v2-v3/
schema = $schema$
$schema$

#----------------------------------
[user GNUmed owner]
name = gm-dbo
password = 

[user postgres]
name = postgres

#----------------------------------
# these really shouldn't be changed
#----------------------------------
[GnuMed defaults]

database owner alias = GNUmed owner

groups = $groups$
$groups$

#----------------------------------
# $Log: update_db-v2_v3.conf,v $
# Revision 1.20  2007-01-02 19:50:29  ncq
# - define template version
#
# Revision 1.19  2006/12/29 16:28:25  ncq
# - "service" -> "bundle", no more services
# - remove "name" and "version" on previous "service" groups
#
# Revision 1.18  2006/12/29 13:56:50  ncq
# - bump required PG version to 7.4
# - remove procedural languages options
# - include gmCreateProceduralLanguages.sql in database level superuser schema import
#
# Revision 1.17  2006/12/13 13:33:21  ncq
# - add clin-operation.sql
#
# Revision 1.16  2006/12/12 18:14:11  ncq
# - transfer GNUmed users on database upgrade
#
# Revision 1.15  2006/12/11 17:05:49  ncq
# - add a bunch of files
#
# Revision 1.14  2006/11/24 09:22:42  ncq
# - add audit health issue static change script
# - add clin health issue dynamic change script
#
# Revision 1.13  2006/11/20 15:54:11  ncq
# - added dem-v_person_comms
#
# Revision 1.12  2006/11/19 11:17:36  ncq
# - add some files
#
# Revision 1.11  2006/11/14 23:29:25  ncq
# - add create_street/create_address
#
# Revision 1.10  2006/11/12 23:27:11  ncq
# - add dem-v_pat_addresses
#
# Revision 1.9  2006/11/09 20:22:33  ncq
# - add address, street, urb, state views
#
# Revision 1.8  2006/11/07 00:37:23  ncq
# - include clin-v_emr_journal.sql
#
# Revision 1.7  2006/10/24 13:09:09  ncq
# - add more change scripts
#
# Revision 1.6  2006/10/08 09:07:05  ncq
# - add more change scripts
#
# Revision 1.5  2006/09/30 10:33:24  ncq
# - include more dynamic stuff
#
# Revision 1.4  2006/09/28 14:39:34  ncq
# - cleanup
# - use static/ and dynamic/
# - better group naming
#
# Revision 1.3  2006/09/19 18:29:19  ncq
# - current state of affairs
#
# Revision 1.2  2006/09/18 17:31:48  ncq
# - add more schema items
#
# Revision 1.1  2006/09/16 21:39:50  ncq
# - start work on v3 database
#
# Revision 1.15  2006/05/24 12:51:13  ncq
# - standarize on only '' being local domain sockets connections
#
# Revision 1.14  2006/05/08 12:38:47  ncq
# - make password parameter sane:
#   - missing or commented out means: not needed, eg IDENT or TRUST
#   - empty means: ask user if interactive or leave empty (but log warning) if not interactive
#
# Revision 1.13  2006/05/06 18:49:44  ncq
# - GnuMed -> GNUmed
#
# Revision 1.12  2006/01/05 16:07:11  ncq
# - generate audit trail tables and functions in schema "audit"
# - adjust configuration
# - audit trigger functions now "security definer" (== gm-dbo)
# - grant SELECT only to non-gm-dbo users
# - return language_handler not opaque from language call handler functions
#
# Revision 1.11  2005/12/07 16:27:07  ncq
# - don't bootstrap cross db fk defs
#
# Revision 1.10  2005/12/04 09:35:08  ncq
# - add notifications-dynamic
#
# Revision 1.9  2005/11/29 19:01:33  ncq
# - need to load dynamic auditing stuff earlier
#
# Revision 1.8  2005/11/18 15:46:31  ncq
# - more dynamic DDL parts need to be re-run now, reorder slightly
#
# Revision 1.7  2005/11/09 14:20:49  ncq
# - try to be more robust in creating languages
#
# Revision 1.6  2005/11/01 08:52:36  ncq
# - add unmatchable/unmatched/reviewed views
#
# Revision 1.5  2005/10/26 21:32:05  ncq
# - reviewed status tracking
#
# Revision 1.4  2005/10/24 19:31:01  ncq
# - auditing SQL now has dynamic part, so use it
#
# Revision 1.3  2005/09/21 10:20:08  ncq
# - schema revision views need to be rerun before update*.sql since
#   update uses them
#
# Revision 1.2  2005/09/19 16:31:03  ncq
# - convenience for upgrading a database
#
# Revision 1.1  2005/09/13 11:54:00  ncq
# - support for *updating* a v1 database to v2, non-destructively :-)
#
#
