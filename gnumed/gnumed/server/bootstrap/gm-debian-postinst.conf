# GnuMed database system bootstrapping config file
#-------------------------------------------------
# license: GPL
# author: Karsten Hilbert@gmx.net

#----------------------------------
[revision control]
file = $Source: /home/ncq/Projekte/cvs2git/vcs-mirror/gnumed/gnumed/server/bootstrap/Attic/gm-debian-postinst.conf,v $
version = $Revision: 1.6 $

#----------------------------------
[installation]

interactive = yes

description = $description$
This will set up a standard monolithic test system for GnuMed
that is immediately useable. It will contain patient demographics,
clinical tables, german translations and some sample data and
is intended for the Debian postinst script. Therefore it is
non-interactive and contains passwords.

It will also have some test accounts for access to the database.
Please refer to server/sql/gmTestAccounts.sql to learn more
about those. YOU MUST make sure to remove them prior to going
life on a production system because they currently apply to
ALL databases.

The database name will be "gnumed-test" which is expected
to not exist prior to running this script.
$description$

services = $services$
config
demographics
clinical
$services$

#----------------------------------
# services
#----------------------------------
[service config]
name = default
version = 0.1
database alias = core
postgres version = 7.1
registration database = core
schema = $schema$
sql/gmconfiguration.sql
$schema$

[service demographics]
name = personalia
version = 0.1
database alias = core
postgres version = 7.1
registration database = core
schema = $schema$
sql/gmidentity.sql
sql/gmIdentityViews.sql
sql/gmgis.sql
sql/country.specific/de/german-family_relations.sql
$schema$

[service clinical]
name = historica
version = 0.1
database alias = core
postgres version = 7.1
registration database = core
schema = $schema$
sql/gmclinical.sql
sql/gmClinicalViews.sql
sql/country.specific/de/german-gmclinical.sql
$schema$

#----------------------------------
# databases
#----------------------------------
[database core]
name = gnumed-test
server alias = local host
audit marker table = audit_mark
audit trail parent table = audit_trail
audit trail table prefix = log_
schema = $schema$
sql/gmSchemaRevision.sql
sql/gmServices.sql
sql/gmI18N.sql
sql/gmAudit.sql
$schema$

#----------------------------------
# servers
#----------------------------------
[server local host]
name = 127.0.0.1
port = 5432
template database = template1
super user alias = postgres
schema = $schema$
sql/gmTestAccounts.sql
$schema$

#----------------------------------
# users
#----------------------------------
[user GnuMed owner]
name = gm-dbowner
#password = 

[user postgres]
name = postgres
#password =

#----------------------------------------------
# the following sections really shouldn't
# be changed unless you know what you are doing
#----------------------------------------------
[GnuMed defaults]

database owner alias = GnuMed owner

groups = $groups$
gm-doctors
_gm-doctors
gm-staff_medical
_gm-staff_medical
gm-staff_office
_gm-staff_office
gm-trainees_medical
gm-trainees_office
gm-public
$groups$

procedural languages = $procedural languages$
pg/SQL
$procedural languages$

language library dirs = $language library dirs$
/usr/lib/postgresql/
/usr/lib/postgresql/lib/
/usr/lib/pgsql/
/usr/local/pgsql/lib
$language library dirs$

#----------------------------------
# languages
#----------------------------------
[pg/SQL]
library name = plpgsql.so

call handler = $call handler$
CREATE FUNCTION plpgsql_call_handler () RETURNS OPAQUE AS '%s' LANGUAGE 'C';
$call handler$

language activation = $language activation$
CREATE TRUSTED PROCEDURAL LANGUAGE 'plpgsql' HANDLER plpgsql_call_handler LANCOMPILER 'PL/pgSQL';
$language activation$


[pg/Python]
library name = plpython.so

call handler = $call handler$
CREATE FUNCTION plpython_call_handler () RETURNS OPAQUE AS '%s' LANGUAGE 'C';
$call handler$

language activation = $language activation$
CREATE TRUSTED PROCEDURAL LANGUAGE 'plpython' HANDLER plpython_call_handler;
$language activation$

#----------------------------------
# $Log: gm-debian-postinst.conf,v $
# Revision 1.6  2003-05-22 12:53:41  ncq
# - add automatic audit trail generation
# - add options for that
#
# Revision 1.5  2003/05/14 07:27:54  ncq
# - add gmAudit.sql to database level schema
#
# Revision 1.4  2003/05/12 12:47:25  ncq
# - import some schema files at the database level, too
# - add corresponding schema list in the config files
#
# Revision 1.3  2003/04/28 20:47:15  ncq
# - factored out gmClinicalViews.sql
#
# Revision 1.2  2003/04/18 13:21:16  ncq
# - include new script gmIdentityViews.sql
#
# Revision 1.1  2003/03/30 22:18:53  ncq
# - renamed after discussion with native speaker :-)
#
# Revision 1.3  2003/03/30 20:57:37  ncq
# - make localhost be 127.0.0.1 as Mandrake happens to want to rename that to the local hostname :-)
#
# Revision 1.2  2003/03/26 15:47:54  ncq
# - alas, some distros store procedural language libraries in /usr/lib/postgresql/
#
# Revision 1.1  2003/02/25 08:26:49  ncq
# - moved here from server/utils/
#
# Revision 1.6  2003/02/23 19:13:08  ncq
# - move language library dirs to [GnuMed defaults] and that to
#   the bottom of the file as per suggestion by Andreas
#
# Revision 1.5  2003/02/09 11:46:11  ncq
# - added core database option for registering services
# - convenience function _run_query()
#
# Revision 1.4  2003/01/30 09:01:38  ncq
# - german-clinical -> german-gmclinical
#
# Revision 1.3  2003/01/28 13:39:14  ncq
# - implemented schema import at the server level (= template database)
# - this is mainly useful for importing users
#
# Revision 1.2  2003/01/28 09:37:22  ncq
# - moved unchanging defaults to bottom of file
#
# Revision 1.1  2003/01/28 09:34:11  ncq
# - for Debian to play around with
#
# Revision 1.2  2003/01/27 01:48:03  ncq
# - updated to be more complete, added description
#
# Revision 1.1  2003/01/26 12:47:17  ncq
# - next generation from test-area/
#
# Revision 1.1  2003/01/22 22:50:36  ncq
# - example of minimal monolithic database on localhost
#
