<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML
><HEAD
><TITLE
>RedHat (8.0)</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
REL="HOME"
TITLE="GNUMed"
HREF="index.html"><LINK
REL="UP"
TITLE="Installation"
HREF="installation.html"><LINK
REL="PREVIOUS"
TITLE="Installing GNUMed on Mac OSX 10.3 (Panther)"
HREF="mac-panther.html"><LINK
REL="NEXT"
TITLE="Windows"
HREF="win9x.html"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>GNUMed: User's Manual</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="mac-panther.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 2. Installation</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="win9x.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="REDHAT"
>2.7. RedHat (8.0)</A
></H1
><P
>Author: Yudhvir Singh Sidhu, <A
HREF="mailto:Yudhvir@hawaii.edu"
TARGET="_top"
>Yudhvir@hawaii.edu</A
> </P
><P
>Date Created: 4 Nov 03, modified 06 Nov 03 by Yudhvir</P
><P
>What I did :Moved pypgSQL to client side and added stuff on how to drop a database.</P
><P
>Disclaimer: No guarantees if these instructions will work or cause any damage.</P
><P
>Refinement is needed, so please send me your suggestions. I'll make changes and send it to the listserv. Since I do not have any other Linux flavor, I am limited to RedHat. </P
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN587"
>2.7.1. Introduction</A
></H2
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN589"
>2.7.1.1. General</A
></H3
><P
>		I divided gnumed installation in two parts: client-only and client + server. The division is important because the client install is relatively easier and you can use it to connect to a remote database and play with the screens. As you can tell, the database part is being called the server. Both installs require cvs download of the module "gnumed."
		</P
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN592"
>2.7.2. Preparation</A
></H2
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN594"
>2.7.2.1. Notes</A
></H3
><P
>&#13;Download these files. If you have the RH 8.0 set of 5 cds, many of these files are on cds under the RPM directory. Get them together first, the order in which they are installed is important. I'll list that later.

<EM
>NOTE: RedHat's GUI rpm "Package" GUI utility works and is simpler to use than the command line because it figures out dependencies and installs them also. However, it sometimes hangs. Maybe "hangs" is not the right description, it hides so you don't see it on your screen and won't let you install the rpm package. You have to logout and log back in or kill the process.

NOTE: It is important that you get the right versions of all these rpms that match your RedHat release. gnumed.org's cvs download directories show which versions belong to which RedHat release.</EM
>&#13;</P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN598"
>2.7.2.2. Prepare for Client</A
></H3
><P
><P
></P
><OL
TYPE="1"
><LI
><P
>Python Scripting Language from python.org, version 2.2. I used version 2.2.1 installed via the Red Hat "Packages" GUI under "System Settings." The GUI prompts you to put in the right cd, so you don't have to know which one the software is on. gnumed.org reminds us to "Don't forget to include the Python interface libraries." I have no idea what rpm these files are in or what their names are, but apparently they are loaded as part of the python package by the GUI install of python.</P
></LI
><LI
><P
>GTK libraries from gtk.org, version 1.2, If you have a Gnome windows manager, you probably have these libraries installed. Please keep in mind that KDE uses QT instead of GTK. So, if you have a KDE-only setup, you will have to install these from the rpms on cd or the net. My RedHat setup includes both KDE and GNOME - so I did not have to install these.</P
></LI
><LI
><P
>mx extension libraries from mx, no version given from lemburg.com/files/python/eGenix-mx-Extensions.html . I used egenix-mx-base-2.0.5-py2.2_1.i386.rpm. RedHat 8.0 cd contains the mx-2.0.3-6.i386.rpm.</P
></LI
><LI
><P
>wxWindows windowing library from wxwindows web site, version 2.4. I used wxGTK-static-2.4.2-1.i386.rpm</P
></LI
><LI
><P
>wxPython from wxpython.org, version 2.4. I used wxPythonGTK-py2.2-2.4.2.4-1.i386.rpm</P
></LI
></OL
></P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN612"
>2.7.2.3. Prepare for Server</A
></H3
><P
><P
></P
><OL
TYPE="1"
><LI
><P
>The libraries: I used postgresql-libs-7.2.2-1.i386.rpm from the RH 8.0 install cds</P
></LI
><LI
><P
>The database: I used postgresql-7.2.2-1.i386.rpm from the RH 8.0 install cds</P
></LI
><LI
><P
>The server: PostgreSQL Database server from postgresql.org, version 7.2. I used postgresql-server-7.2.2-1.i386.rpm from the RH 8.0 install cds</P
></LI
><LI
><P
>PyPgSQL from www.pypgsql.sourceforge.net, version 2.3. I used pyPgSQL-2.3-1.rh80.i386.rpm</P
></LI
></OL
></P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN624"
>2.7.2.4. Create gnudb User Account</A
></H3
><P
>Log in as root and create the user account.</P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN627"
>2.7.2.5. Get gnumed via CVS</A
></H3
><P
>You need not know anything about cvs, just run these commands as user gnumed:
<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>mkdir gnumed 
export CVS_RSH="ssh"
cvs -d :ext:anoncvs@savannah.gnu.org:/cvsroot/root</PRE
></FONT
></TD
></TR
></TABLE
>
<EM
>NOTE: you really do not need to create this directory. I did and all my examples follow that path.</EM
>
<EM
>NOTE: There is no password. Hit enter when it asks you for it.</EM
>

This takes some time and brings down all the software and puts it into a directory called gnumed. You will end up with two or three gnumed directories. One created for the user account, the second that you created in 3a above, and cvs creates the third.</P
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN633"
>2.7.3. Installation</A
></H2
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN635"
>2.7.3.1. General</A
></H3
><P
>If you are doing a clinet+server install the software should be loaded in the following order. <EM
>That is the order I followed successfully.</EM
>
<P
></P
><OL
TYPE="1"
><LI
><P
>python - I assume the libraries are loaded at the same time.</P
></LI
><LI
><P
>GTK libraries</P
></LI
><LI
><P
>mx extension libraries</P
></LI
><LI
><P
>PostgreSQL Database server - load the libs first, then the database and lastly the server:
	<P
></P
><OL
TYPE="a"
><LI
><P
>postgressql-libs
	</P
></LI
><LI
><P
>	postgresql database
	</P
></LI
><LI
><P
>	postgresql server
	</P
></LI
></OL
></P
></LI
><LI
><P
>wxWindows windowing library</P
></LI
><LI
><P
>wxPython</P
></LI
><LI
><P
>PyPgSQL</P
></LI
></OL
>
However, if all that you are doing is a client install, I think you can get away with going with the following:</P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN661"
>2.7.3.2. Install Client</A
></H3
><P
>Install the rpms in this order:
<P
></P
><OL
TYPE="1"
><LI
><P
>Python and the libraries [This should already be installed. If not, use the RH package manager GUI.]</P
></LI
><LI
><P
>GTK libraries [This should already be installed. If not, use the RH package manager GUI.]</P
></LI
><LI
><P
>mx</P
></LI
><LI
><P
>wxWindows windowing library</P
></LI
><LI
><P
>wxPython</P
></LI
><LI
><P
>pyPgSQL</P
></LI
></OL
></P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN677"
>2.7.3.3. Install Server</A
></H3
><P
>Most people would not install just the server and <EM
>I did not do that.</EM
> I am guessing that if you wanted to do that, you would only load:
<P
></P
><OL
TYPE="1"
><LI
><P
>postgressql-libs</P
></LI
><LI
><P
>postgresql database</P
></LI
><LI
><P
>postgresql server</P
></LI
><LI
><P
>pyPgSQL <EM
>I HAVE BEEN TOLD: This is Needed on the client, mainly. Only needed on the server machine if one is doing the bootstrapping on that machine. </EM
></P
></LI
><LI
><P
>Then, obviously you would need to create the gnumed database and the bootstrap directory has the scripts. I ran the monolithica one I call mono when doing a complete install.</P
></LI
></OL
></P
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN693"
>2.7.4. Configure Files and Setup Environment Parameters</A
></H2
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN695"
>2.7.4.1. PYTHONPATH and GNUMED_DIR</A
></H3
><P
><EM
>I HAVE BEEN TOLD: GnuMed should run without GNUMED_DIR in most circumstances. One only needs to set it if GnuMed absolutely cannot find its files.</EM
> [I needed to set it on my RH 8.0 system.]
<P
></P
><OL
TYPE="1"
><LI
><P
>as root: find / -name site-packages</P
></LI
><LI
><P
>Copy that full path down</P
></LI
><LI
><P
>As user gnumed: vi ~/.bashrc - I am assuming you are running the bash script. It is okay if this file does not exist, vi will create it. Put that directory name in using the export command as below. My lines are:
<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>export PYTHONPATH=/usr/lib/python2.2/site-packages

export GNUMED_DIR=/home/gnumed/gnumed/gnumed/client</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>source ~/.bashrc [this will make that an environment variable. You can check it by typing env|grep PYTHONPATH]</P
></LI
></OL
></P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN709"
>2.7.4.2. pg_clog, postgres.conf and PGDATA</A
></H3
><P
>&#13;<EM
>[NOTE: you can skip this part for a client-only install]</EM
>
<P
></P
><OL
TYPE="1"
><LI
><P
>su - postgres - This should put you in the postgres home directory</P
></LI
><LI
><P
>cd data - the actual path on my machine is: /var/lib/pgsql/data</P
></LI
><LI
><P
>vi pg_hba.conf - uncomment the "local all" and the "host all" lines towards the bottom of the file.</P
></LI
><LI
><P
>vi postgresql.conf and uncomment tcpip_socket line and edit it to read:
<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>tcip_socket = on</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>uncomment the line: port = 5432</P
></LI
><LI
><P
>exit out of user postgres and come back to user gnumed</P
></LI
><LI
><P
>vi ~/.bashrc and add this line: 
<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>export PGDATA=/var/lib/pgsql/data</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
></OL
></P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN730"
>2.7.4.3. Shortcut Scripts mono and check_log, set password and Configure Files</A
></H3
><P
>&#13;<EM
>[NOTE: you can skip this part for a client-only install]</EM
>
<P
></P
><OL
TYPE="1"
><LI
><P
>as user gnumed, cd to the server/bootstrap directory.

Mine is cd /home/gnumed/gnumed/gnumed/server/bootstrap</P
></LI
><LI
><P
>vi mono and put this line in it:
<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>python bootstrap_gm_db_system.py --conf-file=bootstrap-monolithic_core.conf</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>exit and type: chmod 744 mono&#13;</P
></LI
><LI
><P
>vi check_log and put this line in it:
<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>tail -100 /home/gnumed/.bootstrap_gm_db_system/bootstrap_gm_db_system.log</PRE
></FONT
></TD
></TR
></TABLE
>
<EM
>NOTE: If your logfile is somewhere else, su - root and do a find / -name "*log*"</EM
>&#13;</P
></LI
><LI
><P
>exit and type: <TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>chmod 744 check_log</PRE
></FONT
></TD
></TR
></TABLE
>&#13;</P
></LI
><LI
><P
>as user gnumed and in the bootstrap directory, run ./make-links.sh

<EM
>I HAVE BEEN TOLD: This is not needed anymore in normal circumstances.</EM
>&#13;</P
></LI
><LI
><P
>su to root and type passwd postgres and set the password. This sets a password for the system user 'postgres' which is different from the database user 'postgres' <EM
>I HAVE BEEN TOLD: This is not needed. </EM
> [I chose to create a password because I can su into postgres from any user. I do not have to jump to root to get into postgres.]&#13;</P
></LI
><LI
><P
>in the bootstrap directory vi bootstrap-monolithic_core.conf and uncomment BOTH password lines for gm-dbowner and postgres and type in the passwords. Select a password for gm-dbowner. I selected the same one I use for the gnumed user account. <EM
>I HAVE BEEN TOLD: Many setups use the same name for both thesystem level user account "postgres" under which the

postgresql data files are installed in the filesystem and for the database superuser. Those accounts are actually unrelated entities. They need not have the same password. In fact, the system account postgres need not have a password at all. It is sufficient to be able to su - to it from root. It helps to

have a password for the DB account "postgres", though. </EM
></P
></LI
></OL
></P
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN758"
>2.7.5. Run Client</A
></H2
><P
><P
></P
><OL
TYPE="1"
><LI
><P
>as user gnumed, cd to the ....client/wxpython directory.

Mine is cd /home/gnumed/gnumed/gnumed/client/wxpython</P
></LI
><LI
><P
>./gnumed.sh - this should bring up a login GUI. If the GUI comes up, you have successfully installed the client.&#13;</P
></LI
><LI
><P
>Write an e mail to "Karsten" and request a hostname, a username, and a password and input them into the GUI. Under the "options" button, select "gnumed" and put in the hostname and leave the port as 5432. In the main GUI, input username and pasword.

<EM
>NOTE: If Karsten gives you "anydoc" as the username and password, he actually means any-doc for both fields. Also NOTE: You should be logged onto the net when you do this, I was user gnumed when I did it.</EM
>&#13;</P
></LI
><LI
><P
>If the GUI does not come up:
	<P
></P
><UL
><LI
><P
>	lookup the logfile - mine is created at: /home/gnumed/.gnumed/gnumed.log

	</P
></LI
><LI
><P
>	gnumed.sh tells you where it is creating one

	</P
></LI
><LI
><P
>	input the error into google and see what comes up
	</P
></LI
></UL
></P
></LI
><LI
><P
>If your error lists files "gmCLI" and "gmLog" - the error actually means files "gmCLI.py" and "gmLog.py" These files are on your system.&#13;</P
></LI
><LI
><P
>This error means that your GNUMED_DIR environment variable is not set to ".....client" directory. Do an env| grep GNUMED_DIR or do an echo $GNUMED_DIR to see if it is set correctly. See section above.</P
></LI
></OL
></P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN782"
>2.7.6. Run Server</A
></H2
><P
><P
></P
><OL
TYPE="1"
><LI
><P
>log out of the gnumed account and log back in for all the environment variables to take affect</P
></LI
><LI
><P
>su - postgres and type pg_ctl restart</P
></LI
><LI
><P
>exit out of user postgres and back into user gnumed</P
></LI
><LI
><P
>in the bootstrap directory, type ./mono</P
></LI
><LI
><P
>A loooooooong list will start scrolling by - <EM
>leave it alone.</EM
> It will list errors, many of them. Let it run. It should give you a satisfying message: "Done bootstrapping: We probably succeeded."

<EM
>I HAVE BEEN TOLD: We now log this list. It doesn't scroll by anymore.</EM
>&#13;</P
></LI
><LI
><P
>su - postgres and do pg_ctl restart - just for good measure.</P
></LI
><LI
><P
>Click on the redhat logo and bring up the services GUI - it is under Server Settings. Check the postgres box for the service to load upon bootup.</P
></LI
><LI
><P
>Now you can start your client - see 6b above. Except you will not be connecting to a remote server. Your database is gnumed and your host is localhost. Use the gnumed password and the application should come up.</P
></LI
><LI
><P
>If you stopped the mono process the first time, which creates the database, with a control-c like I did thinking the long scrolling list is not what I should be seeing: ====&#62; you have to drop the half-created database and re-run mono again. Otherwise mono will not run all the way and you do not have a functioning server.

Since I have "webmin" running, I used that to drop the database gnumed. Otherwise, on the command line as any user you could:
<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>dropdb -U postgres gnumed</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>There are other instructions in the gnumed.org installation writeup about how to create a real life instance. I have not reached that far - so I cannot say anything about it.</P
></LI
></OL
></P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="mac-panther.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="win9x.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Installing GNUMed on Mac OSX 10.3 (Panther)</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="installation.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Windows</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>