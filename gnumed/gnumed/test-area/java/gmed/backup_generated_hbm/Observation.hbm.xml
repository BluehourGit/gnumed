<?xml version="1.0"?>

<!DOCTYPE hibernate-mapping PUBLIC 
	"-//Hibernate/Hibernate Mapping DTD//EN"
	"http://hibernate.sourceforge.net/hibernate-mapping.dtd">

<hibernate-mapping>

	<class 
		name="xgmed.domain.observation.Observation"
		table="observation"
		discriminator-value="O"
	>

	    <id 
			name="id"
			type="long"
		>
			<generator class="hilo.long">
			</generator>
	    </id>

		<discriminator
			column="type"
			type="string"
			length="2"
		/>

       <many-to-one
	       name="antecedent"
		   class="xgmed.domain.planning.Action"
		   column="antecedent"
		   not-null="false"
		   unique="false"
		   cascade="none"
		   outer-join="auto"
        />

       <many-to-one
	       name="applicableTime"
		   class="xgmed.domain.common.TimeRecord"
		   column="applicableTime"
		   not-null="false"
		   unique="false"
		   cascade="none"
		   outer-join="auto"
        />

        <one-to-one
            name="associatedObservationRole"
			class="xgmed.domain.observation.AssociatedObservationRole"
			cascade="none"
			outer-join="auto"
			constrained="false"
	    />

       <many-to-one
	       name="assuranceLevel"
		   class="xgmed.domain.observation.AssuranceLevel"
		   column="assuranceLevel"
		   not-null="false"
		   unique="false"
		   cascade="none"
		   outer-join="auto"
        />

       <many-to-one
	       name="observationProtocol"
		   class="xgmed.domain.observation.ObservationProtocol"
		   column="observationProtocol"
		   not-null="false"
		   unique="false"
		   cascade="none"
		   outer-join="auto"
        />

       <many-to-one
	       name="recordTime"
		   class="xgmed.domain.common.TimeRecord"
		   column="recordTime"
		   not-null="false"
		   unique="false"
		   cascade="none"
		   outer-join="auto"
        />

       <many-to-one
	       name="subject"
		   class="xgmed.domain.accountability.Party"
		   column="subject"
		   not-null="false"
		   unique="false"
		   cascade="none"
		   outer-join="auto"
        />

	    <!--
			To add non XDoclet properties, create a file named
			    hibernate-properties-Observation.xml
			containing the additional properties and place it in your merge dir.
	    -->

		<subclass
			name="xgmed.domain.observation.CategoryObservation"
			discriminator-value="C"
		>

       <many-to-one
	       name="observationConcept"
		   class="xgmed.domain.observation.ObservationConcept"
		   column="observationConcept"
		   not-null="false"
		   unique="false"
		   cascade="none"
		   outer-join="auto"
        />

       <many-to-one
	       name="occurence"
		   class="xgmed.domain.observation.Occurence"
		   column="occurence"
		   not-null="false"
		   unique="false"
		   cascade="none"
		   outer-join="auto"
        />

<!-- JRS:FIXME - why was this self inclusion here? A mistake?		

-->	
		</subclass>
		<subclass
			name="xgmed.domain.observation.Measurement"
			discriminator-value="M"
		>

       <many-to-one
	       name="phenomenonType"
		   class="xgmed.domain.observation.PhenomenonType"
		   column="phenomenonType"
		   not-null="false"
		   unique="false"
		   cascade="none"
		   outer-join="auto"
        />

       <many-to-one
	       name="quantity"
		   class="xgmed.domain.common.Quantity"
		   column="quantity"
		   not-null="false"
		   unique="false"
		   cascade="none"
		   outer-join="auto"
        />

<!-- JRS:FIXME - why was this self inclusion here? A mistake?		

-->	
		</subclass>

	</class>

</hibernate-mapping>
